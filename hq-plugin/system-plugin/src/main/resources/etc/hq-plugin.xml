<?xml version="1.0"?> 
<!--

    NOTE: This copyright does *not* cover user programs that use HQ
    program services by normal system calls through the application
    program interfaces provided as part of the Hyperic Plug-in Development
    Kit or the Hyperic Client Development Kit - this is merely considered
    normal use of the program, and does *not* fall under the heading of
     "derived work".

     Copyright (C) [2004-2010], VMware, Inc.
     This file is part of HQ.

     HQ is free software; you can redistribute it and/or modify
     it under the terms version 2 of the GNU General Public License as
     published by the Free Software Foundation. This program is distributed
     in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
     even the implied warranty of MERCHANTABILITY or FITNESS FOR A
     PARTICULAR PURPOSE. See the GNU General Public License for more
     details.

     You should have received a copy of the GNU General Public License
     along with this program; if not, write to the Free Software
     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307
     USA.


-->
<plugin name="system" class="org.hyperic.hq.plugin.system.SystemPluginProxy">
  <property name="PLUGIN_VERSION" value="@project.version@"/>

  <filter name="unix.config_files"
          value="/etc/hosts"/>

  <property name="Win32.DEFAULT_CONFIG_FILE"
            value="C:\WINDOWS\system32\drivers\etc\hosts"/>

  <property name="Linux.DEFAULT_CONFIG_FILE"
            value="${unix.config_files}"/>

  <property name="Solaris.DEFAULT_CONFIG_FILE"
            value="${unix.config_files}"/>

  <property name="HPUX.DEFAULT_CONFIG_FILE"
            value="${unix.config_files}"/>

  <property name="AIX.DEFAULT_CONFIG_FILE"
            value="${unix.config_files}"/>

  <property name="FreeBSD.DEFAULT_CONFIG_FILE"
            value="${unix.config_files}"/>

  <property name="MacOSX.DEFAULT_CONFIG_FILE"
            value="${unix.config_files}"/>

  <filter name="template" value="sigar:Type=NfsClientV3:${alias}"/>

  <metrics name="nfsv3-client">
    <metric name="Nfs Server V3 Null" alias="Null" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Getattr" alias="Getattr" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Setattr" alias="Setattr" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Lookup" alias="Lookup" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Access" alias="Access" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Readlink" alias="Readlink" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Read" alias="Read" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Write" alias="Write" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Create" alias="Create" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Mkdir" alias="Mkdir" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Symlink" alias="Symlink" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Mknod" alias="Mknod" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Remove" alias="Remove" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Rmdir" alias="Rmdir" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Rename" alias="Rename" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Link" alias="Link" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Readdir" alias="Readdir" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Readdirplus" alias="Readdirplus" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Fsstat" alias="Fsstat" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Fsinfo" alias="Fsinfo" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Pathconf" alias="Pathconf" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Commit" alias="Commit" collectionType="trendsup"/>
  </metrics>

  <filter name="template" value="sigar:Type=NfsServerV3:${alias}"/>

  <!-- same rpc counters as -client -->
  <metrics name="nfsv3-server">
    <metric name="Nfs Server V3 Null" alias="Null" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Getattr" alias="Getattr" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Setattr" alias="Setattr" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Lookup" alias="Lookup" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Access" alias="Access" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Readlink" alias="Readlink" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Read" alias="Read" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Write" alias="Write" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Create" alias="Create" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Mkdir" alias="Mkdir" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Symlink" alias="Symlink" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Mknod" alias="Mknod" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Remove" alias="Remove" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Rmdir" alias="Rmdir" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Rename" alias="Rename" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Link" alias="Link" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Readdir" alias="Readdir" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Readdirplus" alias="Readdirplus" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Fsstat" alias="Fsstat" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Fsinfo" alias="Fsinfo" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Pathconf" alias="Pathconf" collectionType="trendsup"/>
    <metric name="Nfs Server V3 Commit" alias="Commit" collectionType="trendsup"/>
  </metrics>

  <metrics name="nfs" include="nfsv3-server,nfsv3-client"/>

  <!-- experimental, none defaultOn -->
  <metrics name="tcp">
    <metric name="Tcp Inbound Connections"
            template="sigar:Type=NetStat:TcpInboundTotal"
            category="THROUGHPUT"/>

    <metric name="Tcp Outbound Connections"
            template="sigar:Type=NetStat:TcpOutboundTotal"
            category="THROUGHPUT"/>

    <metric name="Tcp State ESTABLISHED"
            template="sigar:Type=NetStat:TcpEstablished"
            category="THROUGHPUT"/>

    <metric name="Tcp State SYN_SENT"
            template="sigar:Type=NetStat:TcpSynSent"
            category="THROUGHPUT"/>

    <metric name="Tcp State SYN_RECV"
            template="sigar:Type=NetStat:TcpSynRecv"
            category="THROUGHPUT"/>

    <metric name="Tcp State FIN_WAIT1"
            template="sigar:Type=NetStat:TcpFinWait1"
            category="THROUGHPUT"/>

    <metric name="Tcp State FIN_WAIT2"
            template="sigar:Type=NetStat:TcpFinWait2"
            category="THROUGHPUT"/>

    <metric name="Tcp State TIME_WAIT"
            template="sigar:Type=NetStat:TcpTimeWait"
            category="THROUGHPUT"/>

    <metric name="Tcp State CLOSE"
            template="sigar:Type=NetStat:TcpClose"
            category="THROUGHPUT"/>

    <metric name="Tcp State CLOSE_WAIT"
            template="sigar:Type=NetStat:TcpCloseWait"
            category="THROUGHPUT"/>

    <metric name="Tcp State LAST_ACK"
            template="sigar:Type=NetStat:TcpLastAck"
            category="THROUGHPUT"/>

    <metric name="Tcp State LISTEN"
            template="sigar:Type=NetStat:TcpListen"
            category="THROUGHPUT"/>

    <metric name="Tcp State CLOSING"
            template="sigar:Type=NetStat:TcpClosing"
            category="THROUGHPUT"/>
  </metrics>

  <!-- TCP-MIB -->
  <metrics name="tcp-mib">
    <metric name="Tcp Active Opens"
            template="sigar:Type=Tcp:ActiveOpens"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp Passive Opens"
            template="sigar:Type=Tcp:PassiveOpens"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp Attempt Fails"
            template="sigar:Type=Tcp:AttemptFails"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp Estab Resets"
            template="sigar:Type=Tcp:EstabResets"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp Curr Estab"
            template="sigar:Type=Tcp:CurrEstab"
            category="THROUGHPUT"/>

    <metric name="Tcp In Segs"
            template="sigar:Type=Tcp:InSegs"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp Out Segs"
            template="sigar:Type=Tcp:OutSegs"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp Retrans Segs"
            template="sigar:Type=Tcp:RetransSegs"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp In Errs"
            template="sigar:Type=Tcp:InErrs"
            collectionType="trendsup"
            category="THROUGHPUT"/>

    <metric name="Tcp Out Rsts"
            template="sigar:Type=Tcp:OutRsts"
            collectionType="trendsup"
            category="THROUGHPUT"/>
  </metrics>

  <!-- metrics common to all platforms -->
  <metrics name="system-common" include="tcp-mib">
    <!-- we always return 1, no url get -->
    <metric name="Availability"
            alias="Availability"
            template="system.avail:Type=Platform:Availability"
            category="AVAILABILITY"
            indicator="true"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="Free Memory"
            alias="MemFree"
            template="sigar:Type=Mem:Free"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="B"/>
    <metric name="Total Memory"
            alias="MemTotal"
            template="sigar:Type=Mem:Total"
            category="UTILIZATION"
            collectionType="dynamic"
            indicator="true"
            units="B"/>
    <metric name="Used Memory"
            alias="MemUsed"
            template="sigar:Type=Mem:Used"
            category="UTILIZATION"
            collectionType="dynamic"
            indicator="true"
            units="B"/>
    <metric name="Percent Free Memory"
            template="sigar:Type=Mem:FreePercent"
            units="percent"/>
    <metric name="Percent Used Memory"
            template="sigar:Type=Mem:UsedPercent"
            units="percent"/>
    <metric name="Number of CPUs"
            alias="NumCPUs"
            template="sigar.ext:Type=CpuInfo:Total"
            category="UTILIZATION"
            collectionType="dynamic"
            units="none"/>
    <metric name="User Cpu"
            alias="CpuUser"
            template="sigar:Type=CpuPerc:User"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="System Cpu"
            alias="CpuSys"
            template="sigar:Type=CpuPerc:Sys"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="User Cpu Time"
            alias="CpuUserSec"
            template="sigar:Type=Cpu:User"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
    <metric name="System Cpu Time"
            alias="CpuSysSec"
            template="sigar:Type=Cpu:Sys"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
    <metric name="Cpu Idle Time"
            alias="CpuIdleSec"
            template="sigar:Type=Cpu:Idle"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
    <metric name="Swap Free"
            alias="SwapFree"
            template="sigar:Type=Swap:Free"
            category="UTILIZATION"
            collectionType="dynamic"
            units="B"/>
    <metric name="Swap Used"
            alias="SwapUsed"
            template="sigar:Type=Swap:Used"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="B"/>
    <metric name="Swap Total"
            alias="SwapTotal"
            template="sigar:Type=Swap:Total"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="B"/>
    <metric name="Percent Free Swap"
            template="sigar:Type=Swap:FreePercent"
            units="percentage"/>
    <metric name="Percent Used Swap"
            template="sigar:Type=Swap:UsedPercent"
            units="percentage"/>
    <metric name="Swap Pages In"
            template="sigar:Type=Swap:PageIn"
            category="UTILIZATION"
            collectionType="trendsup"/>
    <metric name="Swap Pages Out"
            template="sigar:Type=Swap:PageOut"
            category="UTILIZATION"
            collectionType="trendsup"/>
    <metric name="System Uptime"
            alias="Uptime"
            template="sigar:Type=Uptime:Uptime"
            category="AVAILABILITY"
            collectionType="static"
            units="sec"/>

    <metric name="Total Processes"
            template="sigar:Type=ProcStat:Total"
            category="UTILIZATION"/>

    <metric name="Running Processes"
            template="sigar:Type=ProcStat:Running"
            category="UTILIZATION"/>

    <metric name="Sleeping Processes"
            template="sigar:Type=ProcStat:Sleeping"
            category="UTILIZATION"/>

    <metric name="Stopped Processes"
            template="sigar:Type=ProcStat:Stopped"
            category="UTILIZATION"/>

    <metric name="Zombie Processes"
            template="sigar:Type=ProcStat:Zombie"
            category="UTILIZATION"/>
    <metric name="File System Reads/Writes"
            alias="FileSystemReadsWrites"
            template="sigar.ext:Type=FileSystemInfo:ReadWrites"            
            category="THROUGHPUT"
            indicator="false"
            units="none"
            collectionType="trendsup"/>

    <metric name="Total disk capacity"
            template="calculated:Type=disk:capacity"
            indicator="true"
            units="KB"
            category="UTILIZATION"/>
    <metric name="Total disk usage"
            template="calculated:Type=disk:usage"
            indicator="true"
            units="KB"
            category="UTILIZATION"/>
    
  </metrics>
  
  <filter name="template" value="pdh2:type=formated:Memory\${name}"/>
  <metrics name="win-memory_col">
      <metric name="Memory Page Faults/sec" category="UTILIZATION"/>
      <metric name="Memory Write Copies/sec" category="UTILIZATION"/>
      <metric name="Memory Transition Faults/sec" category="UTILIZATION"/>
      <metric name="Memory Demand Zero Faults/sec" category="UTILIZATION"/>
      <metric name="Memory Cache Faults/sec" category="UTILIZATION"/>
      <metric name="Memory Pages/sec" category="UTILIZATION"/>
      <metric name="Memory Pages Input/sec" category="UTILIZATION"/>
      <metric name="Memory Page Reads/sec" category="UTILIZATION"/>
      <metric name="Memory Pages Output/sec" category="UTILIZATION"/>
      <metric name="Memory Page Writes/sec" category="UTILIZATION"/>
      <metric name="Memory Transition Pages RePurposed/sec" category="UTILIZATION"/>
  </metrics>

  <filter name="template" value="pdh2:Memory:${name}"/>
  <metrics name="win-memory">
      <metric name="Memory Available Bytes" category="UTILIZATION" indicator="true" unit="b"/>
      <metric name="Memory Committed Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory Commit Limit" category="UTILIZATION"/>
      <metric name="Memory Pool Paged Bytes" category="UTILIZATION"/>
      <metric name="Memory Pool Nonpaged Bytes" category="UTILIZATION"/>
      <metric name="Memory Pool Paged Allocs" category="UTILIZATION"/>
      <metric name="Memory Pool Nonpaged Allocs" category="UTILIZATION"/>
      <metric name="Memory Free System Page Table Entries" category="UTILIZATION"/>
      <metric name="Memory Cache Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory Cache Bytes Peak" category="UTILIZATION" units="b"/>
      <metric name="Memory Pool Paged Resident Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory System Code Total Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory System Code Resident Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory System Driver Total Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory System Driver Resident Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory System Cache Resident Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory % Committed Bytes In Use" category="UTILIZATION"/>
      <metric name="Memory Available KBytes" category="UTILIZATION" units="KB"/>
      <metric name="Memory Available MBytes" category="UTILIZATION" units="MB"/>
      <metric name="Memory Free %26 Zero Page List Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory Modified Page List Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory Standby Cache Reserve Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory Standby Cache Normal Priority Bytes" category="UTILIZATION" units="b"/>
      <metric name="Memory Standby Cache Core Bytes" category="UTILIZATION" units="b"/>
  </metrics>

  <!-- metrics common to all unix platforms -->
  <metrics name="system-common-unix" include="system-common">
    <metric name="Load Average 1 Minute"
            alias="LoadAverage0"
            template="sigar:Type=LoadAverage:0"
            category="UTILIZATION"
            collectionType="dynamic"
            units="none"/>
    <metric name="Load Average 5 Minutes"
            alias="LoadAverage1"
            template="sigar:Type=LoadAverage:1"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="none"/>
    <metric name="Load Average 15 Minutes"
            alias="LoadAverage2"
            template="sigar:Type=LoadAverage:2"
            category="UTILIZATION"
            collectionType="dynamic"
            units="none"/>
    <metric name="Cpu Nice"
            alias="CpuNice"
            template="sigar:Type=CpuPerc:Nice"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="Cpu Idle"
            alias="CpuIdle"
            template="sigar:Type=CpuPerc:Idle"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="Cpu Usage"
            alias="CpuUsage"
            indicator="true"
            template="sigar:Type=CpuPerc:Combined"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>
  </metrics>

  <metrics name="cpu-wait">
    <metric name="Cpu Wait"
            alias="CpuWait"
            template="sigar:Type=CpuPerc:Wait"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>

    <metric name="Cpu Wait Time"
            alias="CpuWaitSec"
            template="sigar:Type=Cpu:Wait"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
  </metrics>

  <metrics name="cpu-irq">
    <metric name="Cpu Irq"
            alias="CpuIrq"
            template="sigar:Type=CpuPerc:Irq"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>

    <metric name="Cpu Irq Time"
            alias="CpuIrqSec"
            template="sigar:Type=Cpu:Irq"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
  </metrics>

  <metrics name="cpu-softirq">
    <metric name="Cpu SoftIrq"
            alias="CpuSoftIrq"
            template="sigar:Type=CpuPerc:SoftIrq"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>

    <metric name="Cpu SoftIrq Time"
            alias="CpuSoftIrqSec"
            template="sigar:Type=Cpu:SoftIrq"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
  </metrics>

  <metrics name="cpu-stolen">
    <metric name="Cpu Stolen"
            alias="CpuStolen"
            template="sigar:Type=CpuPerc:Stolen"
            category="UTILIZATION"
            collectionType="dynamic"
            units="percentage"/>

    <metric name="Cpu Stolen Time"
            alias="CpuStolenSec"
            template="sigar:Type=Cpu:Stolen"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
  </metrics>

  <metrics name="Linux"
           include="system-common-unix,cpu-wait,cpu-irq,cpu-softirq,cpu-stolen,tcp,nfs">
    <metric name="Free Memory (+ buffers/cache)"
            alias="ActualMemFree"
            template="sigar:Type=Mem:ActualFree"
            category="UTILIZATION"
            indicator="false"
            collectionType="dynamic"
            units="B"/>
    <metric name="Used Memory (- buffers/cache)"
            alias="ActualMemUsed"
            template="sigar:Type=Mem:ActualUsed"
            category="UTILIZATION"
            collectionType="dynamic"
            units="B"/>
  </metrics>

  <metrics name="Solaris"
           include="system-common-unix,cpu-wait,tcp,nfs"/>

  <metrics name="HPUX"
           include="system-common-unix,cpu-wait,tcp"/>

  <metrics name="AIX"
           include="system-common-unix,cpu-wait,nfs"/>

  <metrics name="MacOSX" include="system-common-unix,tcp,nfs"/>

  <metrics name="FreeBSD" include="system-common-unix,tcp,nfs"/>

  <metrics name="NetBSD" include="FreeBSD"/>

  <metrics name="OpenBSD" include="FreeBSD"/>

  <metrics name="Win32" include="system-common,tcp,win-memory,win-memory_col">
    <metric name="Cpu Usage"
            alias="CpuUsage"
            template="sigar:Type=CpuPerc:Combined"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="percentage"/>
            
    <metric name="Total Memory"
            alias="MemTotal"
            template="sigar:Type=Mem:Total"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="B"/>
    <metric name="Used Memory"
            alias="MemUsed"
            template="sigar:Type=Mem:Used"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="B"/>            

    <!-- Script to check for available updates (8 hour interval) -->
    <metric name="Available Updates"
            category="Availability"
            interval="28800000"
            script="pdk/scripts/windows_updates.vbs"
            template="exec:file=${script}:ResultValue"/>
  </metrics>
   <filter name="hyper-v_hypervisor" value="Hyper-V Hypervisor"/>
   <filter name="hyper-v_virtual_machine_health_summary" value="Hyper-V Virtual Machine Health Summary"/>        
    

<metrics name="Win-Hyper-V"  include="Win32">
	      <metric name="Virtual Machines Health Summary:Health Ok"
                        template="pdh:${hyper-v_virtual_machine_health_summary}:HEALTH OK"
                        indicator="true"
                        defaultOn="true"
                    collectionType="dynamic"/>
        <metric name="Virtual Machines Health Summary:Health Critical"
                        template="pdh:${hyper-v_virtual_machine_health_summary}:Health Critical"
                        indicator="true"
                        defaultOn="true"
                    collectionType="dynamic"/>
        <metric name="Hyper-V Hypervisor:Logical Processors"
                        template="pdh:${hyper-v_hypervisor}:Logical Processors"
                        indicator="true"
                        defaultOn="true"
                    collectionType="dynamic"/>
        <metric name="Hyper-V Hypervisor:Partitions"
                        template="pdh:${hyper-v_hypervisor}:Partitions"
                        indicator="true"
                        defaultOn="true"
                    collectionType="dynamic"/>
        <metric name="Hyper-V Hypervisor:Total Pages"
                        template="pdh:${hyper-v_hypervisor}:Total Pages"
                        indicator="true"
                        defaultOn="true"
                    collectionType="dynamic"/>
	   <metric name="Hyper-V Hypervisor:Virtual Processors"
                        template="pdh:${hyper-v_hypervisor}:Virtual Processors"
                        indicator="true"
                        defaultOn="true"
                    collectionType="dynamic"/>      

  	 <metric name="Percent Used Memory"
             template="sigar:Type=Mem:UsedPercent"
             indicator="true"
             units="percent"/>              
  </metrics>	

  <filter name="template" value="pdh2:type=formated:PhysicalDisk(%name%)\${name}"/>
  <metrics name="FileServer Physical Disk">
      <metric name="Availability" alias="Availability" indicator="true" template="disk.avail:type=formated,disk=%name%:${alias}"/>
      <metric name="% Disk Read Time" units="percent"/>
      <metric name="% Disk Time" indicator="true" units="percent"/>
      <metric name="% Disk Write Time" units="percent"/>
      <metric name="% Idle Time" units="percent"/>
      <metric name="Avg. Disk Bytes/Read" units="B"/>
      <metric name="Avg. Disk Bytes/Transfer" units="B"/>
      <metric name="Avg. Disk Bytes/Write" units="B"/>
      <metric name="Avg. Disk Queue Length" indicator="true"/>
      <metric name="Avg. Disk Read Queue Length"/>
      <metric name="Avg. Disk Write Queue Length"/>
      <metric name="Avg. Disk sec/Read"/>
      <metric name="Avg. Disk sec/Transfer"/>
      <metric name="Avg. Disk sec/Write"/>
      <metric name="Current Disk Queue Length"/>
      <metric name="Disk Bytes/sec" units="B"/>
      <metric name="Disk Read Bytes/sec" units="B"/>
      <metric name="Disk Reads/sec"/>
      <metric name="Disk Transfers/sec"/>
      <metric name="Disk Write Bytes/sec" units="B"/>
      <metric name="Disk Writes/sec"/>
      <metric name="Split IO/Sec"/>
  </metrics>

  <metrics name="FileServer Mount">
    <metric name="Availability"
            alias="Availability"
            template="system.avail:Type=MountedFileSystemUsage,Arg=%mount%:UsePercent"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Use Percent"
            alias="UsePercent"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:UsePercent"
            category="UTILIZATION"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Total Bytes Used"
            alias="TotFsUsed"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:Used"
            category="UTILIZATION"
            units="KB"
            collectionType="dynamic"/>

    <metric name="Capacity"
            alias="Capacity"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:Total"
            category="UTILIZATION"
            units="KB"
            collectionType="static"/>

    <metric name="Total Bytes Free"
            alias="TotFsFree"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:Free"
            category="UTILIZATION"
            indicator="true"
            units="KB"
            collectionType="dynamic"/>

    <metric name="Total Bytes Avail"
            alias="TotFsAvail"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:Avail"
            category="UTILIZATION"
            units="KB"
            collectionType="dynamic"/>

    <metric name="Disk Reads"
            alias="DiskReads"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:DiskReads"
            category="THROUGHPUT"
            indicator="true"
            units="none"
            collectionType="trendsup"/>

    <metric name="Disk Writes"
            alias="DiskWrites"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:DiskWrites"
            category="THROUGHPUT"
            indicator="true"
            units="none"
            collectionType="trendsup"/>

    <metric name="Disk Read Bytes"
            alias="DiskReadBytes"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:DiskReadBytes"
            category="THROUGHPUT"
            units="B"
            collectionType="trendsup"/>

    <metric name="Disk Write Bytes"
            alias="DiskWriteBytes"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:DiskWriteBytes"
            category="THROUGHPUT"
            units="B"
            collectionType="trendsup"/>

    <metric name="Disk Queue"
            alias="DiskQueue"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:DiskQueue"
            category="THROUGHPUT"
            units="none"
            collectionType="dynamic"/>

    <metric name="Disk Service Time"
            alias="DiskServiceTime"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:DiskServiceTime"
            category="UTILIZATION"
            units="ms"
            collectionType="dynamic"/>

    <!-- Win32 does not have inodes, rendering these metric two useless -->
    <metric name="Free Files"
            alias="FreeFiles"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:FreeFiles"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

    <metric name="Total Files"
            alias="Files"
            template="sigar:Type=MountedFileSystemUsage,Arg=%mount%:Files"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>
  </metrics>

  <metrics name="file-common">
    <metric name="Last Modified Time"
            alias="LastModified"
            template="sigar:Type=FileInfo,Arg=%path%:Mtime"
            category="UTILIZATION"
            units="epoch-millis"
            collectionType="static"/>

    <metric name="Time Since Last Modified"
            alias="TimeSinceLastModified"
            template="sigar:Type=FileInfo,Arg=%path%:SMtime"
            category="UTILIZATION"
            units="ms"/>

    <metric name="Last Change Time"
            alias="LastChange"
            template="sigar:Type=FileInfo,Arg=%path%:Ctime"
            category="UTILIZATION"
            units="epoch-millis"
            collectionType="static"/>

    <metric name="Time Since Last Change"
            alias="TimeSinceLastChange"
            template="sigar:Type=FileInfo,Arg=%path%:SCtime"
            category="UTILIZATION"
            units="ms"/>

    <metric name="Last Access Time"
            alias="LastAccess"
            template="sigar:Type=FileInfo,Arg=%path%:Atime"
            category="UTILIZATION"
            units="epoch-millis"
            collectionType="static"/>

    <metric name="Time Since Last Access"
            alias="TimeSinceLastAccess"
            template="sigar:Type=FileInfo,Arg=%path%:SAtime"
            category="UTILIZATION"
            units="ms"/>

    <metric name="Permissions"
            alias="Permissions"
            template="sigar:Type=FileInfo,Arg=%path%:Mode"
            category="UTILIZATION"
            units="none"
            collectionType="static"/>

    <metric name="Owner User Id"
            alias="Uid"
            template="sigar:Type=FileInfo,Arg=%path%:Uid"
            category="UTILIZATION"
            units="none"
            collectionType="static"/>

    <metric name="Owner Group Id"
            alias="Gid"
            template="sigar:Type=FileInfo,Arg=%path%:Gid"
            category="UTILIZATION"
            units="none"
            collectionType="static"/>
  <!-- type, inode, device, nlink -->
  </metrics>

  <metrics name="FileServer File" include="file-common">
    <metric name="Availability"
            alias="Availability"
            template="system.avail:Type=FileInfo,Arg=%path%:Mtime"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <!-- not useful for a directory -->
    <metric name="Size"
            alias="Size"
            template="sigar:Type=FileInfo,Arg=%path%:Size"
            category="UTILIZATION"
            indicator="true"
            units="B"
            collectionType="dynamic"/>
  </metrics>

  <metrics name="FileServer Directory" include="file-common">
    <metric name="Availability"
            alias="Availability"
            template="system.avail:Type=FileInfo,Arg=%path%:Type"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Regular Files"
            alias="Files"
            template="sigar:Type=DirStats,Arg=%path%:Files"
            category="UTILIZATION"
            indicator="true"
            units="none"
            collectionType="dynamic"/>

    <metric name="Subdirectories"
            alias="Subdirs"
            template="sigar:Type=DirStats,Arg=%path%:Subdirs"
            category="UTILIZATION"
            indicator="true"
            units="none"
            collectionType="dynamic"/>

    <metric name="Symbolic Links"
            alias="Symlinks"
            template="sigar:Type=DirStats,Arg=%path%:Symlinks"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

    <metric name="Character Devices"
            alias="Chrdevs"
            template="sigar:Type=DirStats,Arg=%path%:Chrdevs"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

    <metric name="Block Devices"
            alias="Blkdevs"
            template="sigar:Type=DirStats,Arg=%path%:Blkdevs"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

    <metric name="Sockets"
            alias="Sockets"
            template="sigar:Type=DirStats,Arg=%path%:Sockets"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

    <metric name="Total"
            alias="Total"
            template="sigar:Type=DirStats,Arg=%path%:Total"
            category="UTILIZATION"
            indicator="true"
            units="none"
            collectionType="dynamic"/>

    <metric name="Disk Usage"
            template="sigar:Type=DirStats,Arg=%path%:DiskUsage"
            category="UTILIZATION"
            units="B"
            collectionType="dynamic"/>
  </metrics>

  <filter name="template"
          value="sigar:Type=DirUsage,Arg=%path%:${alias}"/>

  <metrics name="FileServer Directory Tree">
    <metric name="Availability"
            indicator="true"/>

    <metric name="Regular Files"
            alias="Files"
            indicator="true"/>

    <metric name="Subdirectories"
            alias="Subdirs"
            indicator="true"/>

    <metric name="Symbolic Links"
            alias="Symlinks"/>

    <metric name="Character Devices"
            alias="Chrdevs"/>

    <metric name="Block Devices"
            alias="Blkdevs"/>

    <metric name="Sockets"/>

    <metric name="Total"/>
 
    <metric name="Disk Usage"
            units="B"
            indicator="true"/>
  </metrics>

  <filter name="script.args"
          value="exec=%prefix%,file=%path%,args=%args%,timeout=%timeout%"/>

  <metrics name="Script">
    <metric name="Availability"
            alias="Availability"
            template="exec:${script.args}:Availability"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Execution Time"
            alias="ExecTime"
            template="exec:${script.args}:ExecTime"
            category="THROUGHPUT"
            indicator="true"
            units="ms"
            collectionType="dynamic"/>

    <metric name="Result Value"
            template="exec:${script.args}:ResultValue"
            category="UTILIZATION"
            indicator="true"/>
  </metrics>

  <metrics name="NetworkServer Interface">
    <metric name="Availability"
            alias="Availability"
            template="system.avail:Type=NetIfconfig,Arg=%interface%:Flags"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Bits Received"
            alias="BitsIn"
            template="sigar:Type=NetIfstat,Arg=%interface%:RxBytes"
            category="THROUGHPUT"
            indicator="true"
            units="bytesToBits"
            rate="1s"
            collectionType="trendsup"/>

    <metric name="Bytes Received"
            alias="BytesIn"
            template="sigar:Type=NetIfstat,Arg=%interface%:RxBytes"
            category="THROUGHPUT"
            units="B"
            collectionType="trendsup"/>

    <metric name="Packets Received"
            alias="PacketsIn"
            template="sigar:Type=NetIfstat,Arg=%interface%:RxPackets"
            category="UTILIZATION"
            indicator="true"
            units="none"
            collectionType="trendsup"/>

    <metric name="Bytes Transmitted"
            alias="BytesOut"
            template="sigar:Type=NetIfstat,Arg=%interface%:TxBytes"
            category="THROUGHPUT"
            units="B"
            collectionType="trendsup"/>

    <metric name="Bits Transmitted"
            alias="BitsOut"
            template="sigar:Type=NetIfstat,Arg=%interface%:TxBytes"
            category="THROUGHPUT"
            indicator="true"
            units="bytesToBits"
            rate="1s"
            collectionType="trendsup"/>

    <metric name="Packets Transmitted"
            alias="PacketsOut"
            template="sigar:Type=NetIfstat,Arg=%interface%:TxPackets"
            category="UTILIZATION"
            indicator="true"
            units="none"
            collectionType="trendsup"/>

    <metric name="Transmit Errors"
            alias="TxErrors"
            template="sigar:Type=NetIfstat,Arg=%interface%:TxErrors"
            category="UTILIZATION"
            units="none"
            collectionType="trendsup"/>

    <metric name="Receive Errors"
            alias="RxErrors"
            template="sigar:Type=NetIfstat,Arg=%interface%:RxErrors"
            category="UTILIZATION"
            units="none"
            collectionType="trendsup"/>

    <metric name="Transmit Packets Dropped"
            alias="TxDropped"
            template="sigar:Type=NetIfstat,Arg=%interface%:TxDropped"
            category="UTILIZATION"
            units="none"
            collectionType="trendsup"/>

    <metric name="Receive Packets Dropped"
            alias="RxDropped"
            template="sigar:Type=NetIfstat,Arg=%interface%:RxDropped"
            category="UTILIZATION"
            units="none"
            collectionType="trendsup"/>

    <metric name="Transmit Collisions"
            alias="TxCollisions"
            template="sigar:Type=NetIfstat,Arg=%interface%:TxCollisions"
            category="UTILIZATION"
            units="none"
            collectionType="trendsup"/>
  </metrics>

  <metrics name="CPU">
    <metric name="Availability"
            alias="Availability"
            template="system.avail:Type=CpuPercList,Arg=%cpu%:Idle"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>
    <metric name="User Cpu"
            alias="CpuUser"
            template="sigar:Type=CpuPercList,Arg=%cpu%:User"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="System Cpu"
            alias="CpuSys"
            template="sigar:Type=CpuPercList,Arg=%cpu%:Sys"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="Cpu Idle"
            alias="CpuIdle"
            template="sigar:Type=CpuPercList,Arg=%cpu%:Idle"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="Cpu Usage"
            alias="CpuUsage"
            template="sigar:Type=CpuPercList,Arg=%cpu%:Combined"
            category="UTILIZATION"
            indicator="true"
            collectionType="dynamic"
            units="percentage"/>
    <metric name="User Cpu Time"
            alias="CpuUserSec"
            template="sigar:Type=CpuList,Arg=%cpu%:User"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
    <metric name="System Cpu Time"
            alias="CpuSysSec"
            template="sigar:Type=CpuList,Arg=%cpu%:Sys"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
    <metric name="Cpu Idle Time"
            alias="CpuIdleSec"
            template="sigar:Type=CpuList,Arg=%cpu%:Idle"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
    <metric name="Cpu Wait Time"
            alias="CpuWaitSec"
            template="sigar:Type=CpuList,Arg=%cpu%:Wait"
            category="UTILIZATION"
            collectionType="trendsup"
            units="ms"/>
  </metrics>
  
   <filter name="physical_disk" value="PhysicalDisk(%instance.name%)"/>
  <metrics name="HyperV Physical Disk">
            <metric name="Availability"
            	alias="Availability"
            	template="PhysicalDisk:%instance.name%:Availability"
            	category="AVAILABILITY"
            	indicator="true"
            	units="percentage"
            	collectionType="dynamic"/>
                 <metric name="Current Disk Queue Length"
                                template="pdh:${physical_disk}:Current Disk Queue Length"
                                indicator="true"
                                defaultOn="true"
                            collectionType="dynamic"/>
                <metric name="Disk Bytes"
                                template="pdh:${physical_disk}:Disk Bytes/sec"
                                indicator="true"
                                defaultOn="true"
                           collectionType="trendsup"/>
                <metric name="Disk Transfers"
                                template="pdh:${physical_disk}:Disk Transfers/sec"
                                indicator="true"
                                defaultOn="true"
                            collectionType="trendsup"/>
    </metrics>
    
   <filter name="network_interface" value="Network Interface(%instance.name%)"/>
  <metrics name="HyperV Network Interface">  
            <metric name="Availability"
            	alias="Availability"
            	template="Network Interface:%instance.name%:Availability"
            	category="AVAILABILITY"
            	indicator="true"    
            	units="percentage"
            	collectionType="dynamic"/>
       <metric name="Bytes Total"
                   template="${network_interface}:Bytes Total/sec"
                           indicator="true"
                                defaultOn="true"
                            collectionType="trendsup"/>
                <metric name="Offloaded Connections"
                                template="${network_interface}:Offloaded Connections"
                                indicator="true"
                                defaultOn="true"
                            collectionType="dynamic"/>
                <metric name="Packets"
                                template="${network_interface}:Packets/sec"
                                indicator="true"
                                defaultOn="true"
                            collectionType="trendsup"/>
        <metric name="Packet Outbound Errors"
                      template="${network_interface}:Packets Outbound Errors"
                      indicator="true"
                      defaultOn="true"
                      collectionType="dynamic"/>
        <metric name="Packet Receive Errors"
                       template="${network_interface}:Packets Received Errors"
                       indicator="true"
                       defaultOn="true"
                       collectionType="dynamic"/>
  </metrics>
  
  <filter name="hyper_v_memory" value="Memory"/>
  <metrics name="Hyper-V Memory">
     <metric name="Availability"
            	alias="Availability"
            	template="win32:Service=vmms:${alias}"
            	category="AVAILABILITY"
            	indicator="true"
            	units="percentage"
            	collectionType="dynamic"/>
     <metric name="Available Bytes"
                    template="${hyper_v_memory}:Available Bytes"
                    indicator="true"
                    defaultOn="true"
                    collectionType="dynamic"/>
        <metric name="Pages"
                  template="${hyper_v_memory}:Pages/sec"
                  indicator="true"
                   defaultOn="true"
                   collectionType="trendsup"/>
  </metrics>
   
  <filter name="hyper-v_hypervisor_logical-processor" value="Hyper-V Hypervisor Logical Processor(%instance.name%)"/>
  <metrics name="Hyper-V Logical Processor">
  	<metric name="Availability"
            	alias="Availability"
            	template="Hyper-V Hypervisor Logical Processor:%instance.name%:Availability"
            	category="AVAILABILITY"
            	indicator="true"
            	units="percentage"
            	collectionType="dynamic"/>
	<metric name="% Guest Run Time"
					template="collector:${hyper-v_hypervisor_logical-processor}:% Guest Run Time"
					indicator="true"
					defaultOn="true"	
					units="percent"				
				collectionType="dynamic"/>
	<metric name="% Hypervisor Run Time"
					template="collector:${hyper-v_hypervisor_logical-processor}:% Hypervisor Run Time"
					indicator="true"
					defaultOn="true"	
					units="percent"
				collectionType="dynamic"/>
	<metric name="% Idle Time"
					template="collector:${hyper-v_hypervisor_logical-processor}:% Idle Time"
					indicator="true"
					defaultOn="true"	
					units="percent"
				collectionType="dynamic"/>
	<metric name="% Total Run Time"
					template="collector:${hyper-v_hypervisor_logical-processor}:% Total Run Time"
					indicator="true"
					defaultOn="true"	
					units="percent"
				collectionType="dynamic"/>
  </metrics>

  <metrics name="Process">
    <metric name="Availability"
            alias="Availability"
            template="sigar:Type=ProcState,Arg=%process.query%:State"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Virtual Memory Size"
            alias="VirtualMemSize"
            template="sigar:Type=ProcMem,Arg=%process.query%:Size"
            category="UTILIZATION"
            units="B"
            collectionType="dynamic"/>

    <metric name="Resident Memory Size"
            alias="ResidentMemSize"
            template="sigar:Type=ProcMem,Arg=%process.query%:Resident"
            category="UTILIZATION"
            indicator="true"
            units="B"
            collectionType="dynamic"/>

    <metric name="Cpu System Time"
            alias="SystemTime"
            template="sigar:Type=ProcTime,Arg=%process.query%:Sys"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu User Time"
            alias="UserTime"
            template="sigar:Type=ProcTime,Arg=%process.query%:User"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu Total Time"
            alias="TotalTime"
            template="sigar:Type=ProcTime,Arg=%process.query%:Total"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu Usage"
            alias="Usage"
            template="sigar:Type=ProcCpu,Arg=%process.query%:Percent"
            category="UTILIZATION"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Start Time"
            alias="StartTime"
            template="sigar:Type=ProcTime,Arg=%process.query%:StartTime"
            category="AVAILABILITY"
            units="epoch-millis"
            collectionType="static"/>

    <metric name="Open File Descriptors"
            alias="OpenFd"
            template="sigar:Type=ProcFd,Arg=%process.query%:Total"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

    <metric name="Threads"
            template="sigar:Type=ProcState,Arg=%process.query%:Threads"/>

    <metric name="Child Processes"
            alias="ChildProcesses"
            template="sigar.ext:Type=ChildProcesses,Arg=%process.query%:ChildProcesses"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

  </metrics>

  <metrics name="MultiProcess">
    <metric name="Availability"
            alias="Availability"
            template="system.avail:Type=MultiProcCpu,Arg=%process.query%:Processes"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Number of Processes"
            alias="NumProcesses"
            template="sigar:Type=MultiProcCpu,Arg=%process.query%:Processes"
            category="UTILIZATION"
            units="none"
            collectionType="dynamic"/>

    <metric name="Memory Size"
            alias="MemSize"
            template="sigar:Type=MultiProcMem,Arg=%process.query%:Size"
            category="UTILIZATION"
            units="B"
            collectionType="dynamic"/>

    <metric name="Resident Memory Size"
            alias="ResidentMemSize"
            template="sigar:Type=MultiProcMem,Arg=%process.query%:Resident"
            category="UTILIZATION"
            units="B"
            collectionType="dynamic"/>

    <metric name="Cpu System Time"
            alias="SystemTime"
            template="sigar:Type=MultiProcCpu,Arg=%process.query%:Sys"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu User Time"
            alias="UserTime"
            template="sigar:Type=MultiProcCpu,Arg=%process.query%:User"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu Total Time"
            alias="TotalTime"
            template="sigar:Type=MultiProcCpu,Arg=%process.query%:Total"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu Usage"
            alias="Usage"
            template="sigar:Type=MultiProcCpu,Arg=%process.query%:Percent"
            category="UTILIZATION"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>
  </metrics>

  <filter name="service.ptql"
          value="Pid.Service.eq=%service_name%"/>
  
  <metrics name="Windows Service">
    <metric name="Availability"
            alias="Availability"
            template="win32:Service=%service_name%:${alias}"
            category="AVAILABILITY"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Start Type"
            template="win32:Service=%service_name%:${alias}"
            category="AVAILABILITY"
            collectionType="static"/>

    <metric name="Memory Size"
            alias="MemSize"
            template="sigar:Type=ProcMem,Arg=${service.ptql}:Size"
            category="UTILIZATION"
            units="B"
            collectionType="dynamic"/>

    <metric name="Resident Memory Size"
            alias="ResidentMemSize"
            template="sigar:Type=ProcMem,Arg=${service.ptql}:Resident"
            category="UTILIZATION"
            indicator="true"
            units="B"
            collectionType="dynamic"/>

    <metric name="Cpu System Time"
            alias="SystemTime"
            template="sigar:Type=ProcTime,Arg=${service.ptql}:Sys"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu User Time"
            alias="UserTime"
            template="sigar:Type=ProcTime,Arg=${service.ptql}:User"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu Total Time"
            alias="TotalTime"
            template="sigar:Type=ProcTime,Arg=${service.ptql}:Total"
            category="UTILIZATION"
            units="ms"
            collectionType="trendsup"/>

    <metric name="Cpu Usage"
            alias="Usage"
            template="sigar:Type=ProcCpu,Arg=${service.ptql}:Percent"
            category="UTILIZATION"
            indicator="true"
            units="percentage"
            collectionType="dynamic"/>

    <metric name="Start Time"
            alias="StartTime"
            template="sigar:Type=ProcTime,Arg=${service.ptql}:StartTime"
            category="AVAILABILITY"
            units="epoch-millis"
            collectionType="static"/>

    <metric name="Open Handles"
            alias="OpenHandles"
            template="sigar:Type=ProcFd,Arg=${service.ptql}:Total"
            category="UTILIZATION"
            indicator="true"
            units="none"
            collectionType="dynamic"/>

    <metric name="Threads"
            template="sigar:Type=ProcState,Arg=${service.ptql}:Threads"/>
  </metrics>
  

  <help name="AIX">
  <![CDATA[
  <p>
  <b>NOTE:</b> The agent must have read access to /dev/kmem
  </p>
  ]]>
  </help>

  <help name="Nagios Plugin">
  <![CDATA[
  The Nagios Plugin Service is designed to be able to execute 
  any locally accessible Nagios Plugin available on this system.
  The user running the Hyperic agent must have permission to execute 
  the nagios plugin in order for the Nagios Plugins service to work
  correctly.
  <br>
  The Nagios Plugin Service will execute the configured plugin with
  the specified arguments and return availability based on the succesful
  execution of the plugin, the return code of the plugin invocation, 
  the time it took to execute, and more.
  <br>
  <b>Path</b> is the absolute path to the nagios plugin binary.
  <b>Args</b> is any string argument you want to pass into the plugin
  ]]>
  </help>

  <help name="Process">
  <![CDATA[
  <p>
  Monitoring of an individual process or group of processes requires a 
  process query to differentiate them from other system processes.  This 
  is achieved using <b>P</b>rocess <b>T</b>able <b>Q</b>uery <b>L</b>anguage, 
  or <b>PTQL</b>, a simple query language for finding processes based based 
  on their attributes.
  </p>
  <p>
  PTQL Queries must be in the following format:
  <pre>
    Class.Attribute.operator=value
  </pre>
  Where:
  </p>
  <ul>
  <li> <b>Class</b> is the name of the Sigar class minus the Proc prefix. </li>
  <li> <b>Attribute</b> is an attribute of the given <b>Class</b>,
  index into an array or key in a Map class.</li>
  <li> <b>operator</b> is one of the following for String values:
    <ul>
     <li> <b>eq</b> - Equal to <b>value</b> </li>
     <li> <b>ne</b> - Not Equal to <b>value</b> </li>
     <li> <b>ew</b> - Ends with <b>value</b> </li>
     <li> <b>sw</b> - Starts with <b>value</b> </li>
     <li> <b>ct</b> - Contains <b>value</b> (substring) </li>
     <li> <b>re</b> - Regular expression <b>value</b> matches </li>
    </ul>
  </li>
  <li> <b>operator</b> is one of the following for numeric values:
    <ul>
     <li> <b>eq</b> - Equal to <b>value</b> </li>
     <li> <b>ne</b> - Not Equal to <b>value</b> </li>
     <li> <b>gt</b> - Greater than <b>value</b> </li>
     <li> <b>ge</b> - Greater than or equal <b>value</b> </li>
     <li> <b>lt</b> - Less than <b>value</b> </li>
     <li> <b>le</b> - Less than or equal <b>value</b> </li>
   </ul>
  </li>
  </ul>
  <p>
  Multiple queries must delimited by a comma.
  </p>
  <p>
  <b>Examples:</b>
  </p>
  <p>
  Find JBoss using process name
  <pre>
    State.Name.eq=java,Args.*.eq=org.jboss.Main
  </pre>
  </p>
  <p>
  Find SSHd using a pid file
  <pre>
    Pid.PidFile.eq=/var/run/sshd.pid<br>
  </pre>
  </p>
  <p>
  For more examples see the pdk/lib/.sigar_shellrc file included in the HQ agent distribution and the
  Sigar <a href="http://support.hyperic.com/confluence/display/SIGAR/PTQL">PTQL Documentation</a>.
  </p>
  ]]>
  </help>

  <help name="MultiProcess" include="Process"/>

</plugin>
