<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hyperic HQ 4.x Documentation : ui-Monitor.Server.MbeanBrowser</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Hyperic HQ 4.x Documentation : ui-Monitor.Server.MbeanBrowser
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jul 20, 2009 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <h1><a name="ui-Monitor.Server.MbeanBrowser-UsingJMXMBeanQuery"></a>Using JMX MBean Query</h1>

<p><em>Topics marked with</em> <font color="red"><em>&#42;</em></font> <em>relate to HQ Enterprise-only features.</em></p>

<p>The JMX MBean Query tool allows you to search for MBeans, display their attributes, and invoke selected MBean operations on them.</p>

<p>When HQ alerts you of availability or health issues with a JVM resource or service, you can use the JMX MBean Query tool to troubleshoot and resolve the problem.</p>

<p>The MBean attributes displayed in the JMX MBean Query tool are read-only; the console does not support attribute editing.  In this version of HQ, support for MBean operations is limited to operations with one or no arguments of primitive or simple type.</p>

<p>The JMX MBean Query tool is available on the Views tab when you have a JVM server selected in the HQ portal. These instructions assume that your JVM is in HQ inventory. Note that JVMs are not auto-discovered by HQ. For related instructions, see <a href="http://support.hyperic.com/confluence/display/hypcomm/Sun+JVM" title="Sun JVM">Configuring Sun JVM for Monitoring</a>.</p>

<h2><a name="ui-Monitor.Server.MbeanBrowser-EnteringQueryOptions"></a>Entering Query Options</h2>

<p>To access specific MBean attributes and operations, you enter search patterns in the these text boxes in the JMX MBean Query tool page:</p>

<ul>
	<li>Object Name Pattern - To specify the MBean or Mbeans of interest, enter a&nbsp; valid MBean object name pattern.&nbsp;For information on object name patterns, see <a href="http://java.sun.com/j2ee/1.4/docs/api/javax/management/ObjectName.html">http://java.sun.com/j2ee/1.4/docs/api/javax/management/ObjectName.html</a>.</li>
</ul>


<ul>
	<li>Attribute Regex Filter - To restrict the attributes returned, enter a valid Java regular expression.&nbsp;For information on Java regex patterns, see <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html">http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html</a>.</li>
</ul>


<ul>
	<li>Operation Regex Filter - To restrict the MBean operations returned, enter a valid Java regular expression.</li>
</ul>


<p>Click the <b>Query MBeans</b> button to execute the search.&nbsp;</p>

<p>For MBeans whose object name matches the Object Name Pattern, attributes and operations that match your filter criteria will be listed.&nbsp; For example:</p>

<p><span class="image-wrap" style=""><a class="confluence-thumbnail-link 1303x650" href='http://support.hyperic.com/confluence/download/attachments/59375750/jmx console.gif'><img src="attachments/thumbnails/59375750/65830953" style="border: 0px solid black"/></a></span></p>

<h2><a name="ui-Monitor.Server.MbeanBrowser-EnablingAutomaticRefresh"></a>Enabling Automatic Refresh</h2>

<p>If you wish the console to periodically refresh the attribute values, select an interval from the <b>Refresh Interval</b> pulldown.&nbsp;</p>

<h2><a name="ui-Monitor.Server.MbeanBrowser-DefiningSavedMbeanSearches"></a>Defining Saved Mbean Searches</h2>

<p>If you expect to perform the same search frequently, you can create an XML file that specifies the search criteria. You name the file according to a predefined convention, and store it in a specific directory in your HQ Server installation. Queries you define in this way will appear in the tool's <b>Preset Searches</b> drop-down menu.</p>


<p>When you run a saved search, the Object Name Pattern, Attribute Regex Filter, and Operation Regex Filter it comprises will be displayed in the corresponding text boxes at the top of the view.</p>

<p>Name the file that contains a saved search like this:</p>

<p><em>SearchID</em>&#45;filter.xml</p>

<p>All filters defined in this file will then appear in the <b>Preset Searches</b> drop-down menu and will be named according to the filter ID. Save the file in:</p>

<p>$JBOSS_HOME/deploy/hq.ear/hq.war/hqu/jmx/conf</p>

<p>The following topics defines the XML schema for saved MBean searches.</p>

<h3><a name="ui-Monitor.Server.MbeanBrowser-SchemaforJMXSearchCriteria"></a>Schema for JMX Search Criteria</h3>

<p>A saved MBean search criteria consists of:</p>

<ul>
	<li>A top-level <em>filters</em> element, containing at least one <em>filter</em> sub-element. Each filter sub-element consists of:
	<ul>
		<li>An <em>id</em> attribute containing an identifier for the search. This string will appear in the <b>Preset Searches</b> drop-down menu. Each search you define and save on an HQ server must have a unique <em>d</em> attribute.</li>
		<li>An <em>objectName</em> sub-element, whose value is the object name pattern used for the MBean query.&nbsp;</li>
		<li>An <em>attributeRegex</em> sublement, whose value is the Java regular expression used to filter the attributes returned from the MBean query.&nbsp;</li>
		<li>An <em>operationRegex</em> sublement, whose value is the Java regular expression used to filter the operations returned from the MBean query.</li>
	</ul>
	</li>
</ul>


<p>For example:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?xml version=<span class="code-quote">"1.0"</span> encoding=<span class="code-quote">"UTF-8"</span>?&gt;

&lt;filters&gt;

  &lt;filter id=<span class="code-quote">"JVM Memory MBean"</span>&gt;
    &lt;objectName&gt;java.lang:type=Memory&lt;/objectName&gt;
    &lt;attributeRegex&gt;.*Usage&lt;/attributeRegex&gt;
    &lt;operationRegex&gt;.*&lt;/operationRegex&gt;
  &lt;/filter&gt;

  &lt;filter id=<span class="code-quote">"JVM Platform MBeans"</span>&gt;
    &lt;objectName&gt;java.lang:*&lt;/objectName&gt;
    &lt;attributeRegex&gt;.*&lt;/attributeRegex&gt;
    &lt;operationRegex&gt;.*&lt;/operationRegex&gt;
  &lt;/filter&gt;

&lt;/filters&gt;
</pre>
</div></div>

<h2><a name="ui-Monitor.Server.MbeanBrowser-ImportingaSunJVMintoInventory"></a>Importing a Sun JVM into Inventory</h2>

<p>Your Sun JVM must be configured for JMX monitoring. For instructions, see <a href="http://java.sun.com/j2se/1.5.0/docs/guide/management/agent.html">Monitoring and Management Using JMX</a> on the Sun web site.</p>

<p>Once your JVM is configured for JMX monitoring, define it as a server in HQ. Browse to the platform where the JVM is located view its monitoring page. Select "New Server" from the "Tools Menu" in the upper right corner. On the next page, name your JVM and select "Sun JVM 1.5" from the drop-down menu. In the "Install Path" field, enter your $JAVA_HOME.</p>

<p>On the subsequent page, click the "Configuration Properties" link, highlighted in yellow. If you've set up password authentication for your JMX monitoring, you'll have to input your user and password here. Double-check the jmx.url field and set the port number accordingly. To track configuration and log files, add in the appropriate info after checking the boxes "server.log_track.enable" and "server.config_track.enable". Make sure the box for "Auto-Discover Garbage Collectors and Memory Pools?" is checked. After clicking ok, HQ Server will start receiving the default metrics for that JVM, although it will take a few minutes for them to appear.</p>

<h5><a name="ui-Monitor.Server.MbeanBrowser-ReturntoHQPortalReferenceHQUserInterfaceReference."></a>Return to <a href="HQ User Interface Reference.html" title="HQ User Interface Reference">HQ Portal Reference</a>.</h5>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59375750/65830953.gif">jmx console.gif</a> (image/gif)
                                <br/>
                                                    </div>
				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/confluence/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Apr 20, 2010 15:01</font></td>
		    </tr>
	    </table>
    </body>
</html>