<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hyperic 4.5 Documentation : ui-HQHealth</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Hyperic 4.5 Documentation : ui-HQHealth
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 31, 2011 by <font color="#0050B2">mmcgarry</font>.
				    </div>

				    <h1><a name="ui-HQHealth-HQHealth"></a>HQ Health</h1>

<p><font color="gray"><em>Topics marked with</em></font> <font color="red">*</font> <font color="gray"><em>relate to features available only in vFabric Hyperic.</em></font></p>


<p><b>HQ Health</b> displays real-time diagnostic data for the machine on which the HQ Server is installed. This data helps Hyperic  Support to troubleshoot problems; it is not intended for customer use. The page is available to Administrators only.</p>

<p><b>HQ Health</b> displays statistics from HQ's internal caches. For information about modifying cache settings, see <a href="http://support.hyperic.com/display/EVO/Scaling+and+Tuning+Hyperic+Performance#ScalingandTuningHypericPerformance-ConfigureHQCacheSettingsforImprovedPerformance">Configure HQ Cache Settings for Improved Performance.</a></p>
<h3><a name="ui-HQHealth-SectionsonthisScreen"></a>Sections on this Screen</h3>

<p>The top of the screen displays standard health statistics for a server. Below are three tabs that display more data about the state of the server and database:</p>
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Tab </th>
<th class='confluenceTh'> What Data It Displays </th>
</tr>
<tr>
<td class='confluenceTd'> Diagnostics </td>
<td class='confluenceTd'> This tab contains the information that HQ prints to log files every 15 minutes. You can choose these diagnostics from the drop-down list.&nbsp; <br class="atl-forced-newline" />
<ul>
	<li>Batch Aggregate AvailabilityInserter<font color="red">&#42;</font>: Status of queue for availability updates to database. Available only if using the Batch Aggregate inserter.</li>
	<li>Batch Aggregate DataInserter<font color="red">&#42;</font>: Status of queue for metric updates to the database. Available only if using the Batch Aggregate inserter.</li>
	<li>Event Tracker Stats: Shows minimum, maximum, and average invocation times, and the number of invocations since since the HQ server last started.</li>
	<li>EhCache: Size and hit ratio of HQ caches.</li>
	<li>Metric Reports Stats: A running average of how fast metrics are being pushed into the database.</li>
	<li>ZEvents: Status of the internal BUS.</li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> <a name="ui-HQHealth-cache"></a> Cache </td>
<td class='confluenceTd'> The same data (less the "Bytes" column) displayed in the EhCache display in the Diagnostics tab, but in a more easily viewable format. This tab's data can be sorted. </td>
</tr>
<tr>
<td class='confluenceTd'> Load </td>
<td class='confluenceTd'> Current load on HQ Server, including: <br class="atl-forced-newline" />
<br class="atl-forced-newline" />
<ul>
	<li>Metrics collected per minute</li>
	<li>Platforms</li>
	<li>CPUs</li>
	<li>Agents</li>
	<li>Active Agents</li>
	<li>Servers</li>
	<li>Services</li>
	<li>Applications</li>
	<li>Roles</li>
	<li>Users</li>
	<li>Alerts</li>
	<li>Resources</li>
	<li>Resource Types</li>
	<li>Groups</li>
	<li>Escalations</li>
	<li>Active Escalations</li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> Database </td>
<td class='confluenceTd'><ul>
	<li><b>Actions</b>:
	<ul>
		<li>Purge AIQ Data &#45;Deletes the contents of the auto-discovery queue. This is useful if the queue contains resources that for some reason cannot be imported.&nbsp; Deleting resources from the queue will cause the agent to re-discover them.</li>
		<li>Purge Stalled Executions - Deletes escalations that are stall for some reason.</li>
	</ul>
	</li>
	<li><b>Queries:</b>
	<ul>
		<li>AutoInventory IPs</li>
		<li>AutoInventory Platforms&nbsp;</li>
		<li>AutoInventory Servers</li>
		<li>Orphaned AlertDef Count (See <a href="#ui-HQHealth-OrphanedDatabaseRows">Orphaned Database Rows</a>)</li>
		<li>Orphaned Audit Count (See <a href="#ui-HQHealth-OrphanedDatabaseRows">Orphaned Database Rows</a>)</li>
		<li>Stalled Escalations</li>
		<li>Orphaned Group Count (See <a href="#ui-HQHealth-OrphanedDatabaseRows">Orphaned Database Rows</a>)</li>
		<li>Orphaned Resource Count (See <a href="#ui-HQHealth-OrphanedDatabaseRows">Orphaned Database Rows</a>)</li>
		<li>Postgres Locks</li>
		<li>Postgres Activity</li>
		<li>Active But Disabled Resource Alert Defs</li>
		<li>Database Version Information&nbsp; <br class="atl-forced-newline" /></li>
	</ul>
	</li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> Agents </td>
<td class='confluenceTd'> For each HQ Agent connected to the HQ Server, the following information is listed:
<ul>
	<li>FQDN - of the machine it runs on; this is the identifier of the monitored platform in HQ.</li>
	<li>Address &#45;&nbsp; The IP address upon which the agent listens for server communications.</li>
	<li>Port - The port on the agent's listen address upon which it listens for server communications. Be default, the listen port is 2144.&nbsp;</li>
	<li>Version - HQ version</li>
	<li>Bundle Version</li>
	<li>Creation Time - When the platform where the agent runs was first added to HQ inventory.&nbsp;</li>
	<li>&#35; Platforms - The number of platforms the agent is monitoring. Typically this value is "1", indicated that the agent is monitoring only the platform where it runs. The value is greater, if the agent is also monitoring an an agentless device, for instance an SNMP device.&nbsp;</li>
	<li>&#35; Metrics - This is the number of metrics the agent collects. Hyperic recommends balancing the metric collection load across agents. For example, don't use a single agent to monitor every SNMP devices in your network - this would constitute a single point of failure, and the metric load might downgrade the performance of other services running on the host. .</li>
	<li>Time Offset (ms) - The system time offset between HQ Server and HQ Agent. Time synchronisation on HQ Server and HQ Agents is very important to determine the availability of platforms and services correctly. Single or double digit values are okay. Higher values indicate a problem. In this case, set up NTP-daemons on your server and agent hosts. You can monitor the NTP-daemons and set an alert on the offset value</li>
	<li>License count</li>
</ul>
</td>
</tr>
</tbody></table>
</div>


<h3><a name="ui-HQHealth-OrphanedDatabaseRows"></a>Orphaned Database Rows</h3>

<p>Interrupted database updates can result in orphaned rows in the HQ database. Orphaned rows can cause HQ exceptions.&nbsp; For example:</p>
<ul>
	<li>If the HQ database contains alert definitions that are no longer associated with a resource, trying to edit edit a resource type alert can result in a stack trace similar to:</li>
</ul>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">org.hyperic.hq.events.AlertConditionCreateException:
org.hyperic.hq.measurement.MeasurementNotFoundException: No measurement found for 10288 with template 33434 at org.hyperic.hq.bizapp.server.session.EventsBossImpl.updateAlertDefinition(EventsBossImpl.java:887)</pre>
		</div>
</div></div>

<p>The HQ Health page provides orphaned item queries for alert definitions, resources, groups, and audits.</p>

<p>If these queries indicate that there are any orphaned rows in the HQ database, contact Hyperic support for assistance in removing the orphaned rows.&nbsp;</p>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://support.hyperic.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Jan 12, 2012 13:19</font></td>
		    </tr>
	    </table>
    </body>
</html>
